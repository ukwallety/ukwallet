webpackJsonp([4],{152:function(t,e){},308:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(13),a=(s(18),s(21)),n=s.n(a),u=s(4),o=s.n(u),r=(s(20),s(152),s(19)),c=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.b()},[s("button",{class:t.b("minus",{disabled:t.minusDisabled}),on:{click:function(e){t.onChange("minus")}}}),s("input",{class:t.b("input"),attrs:{type:"number",disabled:t.disabled||t.disableInput},domProps:{value:t.currentValue},on:{input:t.onInput,keypress:t.onKeypress,blur:t.onBlur}}),s("button",{class:t.b("plus",{disabled:t.plusDisabled}),on:{click:function(e){t.onChange("plus")}}})])},name:"stepper",props:{value:{},integer:Boolean,disabled:Boolean,disableInput:Boolean,min:{type:[String,Number],default:1},max:{type:[String,Number],default:1/0},step:{type:[String,Number],default:1},defaultValue:{type:[String,Number],default:1}},data:function(){var t=this.value?+this.value:+this.defaultValue,e=this.correctValue(t);return t!==e&&(t=e,this.$emit("input",t)),{currentValue:t}},computed:{minusDisabled:function(){var t=+this.min,e=+this.step,s=+this.currentValue;return t===s||s-e<t||this.disabled},plusDisabled:function(){var t=+this.max,e=+this.step,s=+this.currentValue;return t===s||s+e>t||this.disabled}},watch:{value:function(t){""!==t&&(t=this.correctValue(+t))!==this.currentValue&&(this.currentValue=t)}},methods:{correctValue:function(t){return isNaN(t)?this.min:Math.max(this.min,Math.min(this.max,t))},onInput:function(t){var e=t.target.value;this.currentValue=e?this.correctValue(+e):e,t.target.value=this.currentValue,this.emitInput()},onChange:function(t){if(this.minusDisabled&&"minus"===t||this.plusDisabled&&"plus"===t)this.$emit("overlimit",t);else{var e=+this.step,s=+this.currentValue;this.currentValue="minus"===t?s-e:s+e,this.emitInput(),this.$emit(t)}},onKeypress:function(t){this.integer&&46===t.keyCode&&t.preventDefault()},onBlur:function(t){this.value||(this.currentValue=+this.min,this.emitInput()),this.$emit("blur",t)},emitInput:function(){this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)}}}),l=(s(23),s(22)),d=(s(72),s(111),s(134),s(144),s(310),s(37)),h=s.n(d),m=s(75),p=s.n(m),k=s(77),g=s.n(k),v=s(0),f=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"van-hairline--bottom",class:t.b()},[s("div",{class:t.b("img-wrap")},[s("img",{attrs:{src:t.goodsImg}})]),s("div",{class:t.b("goods-info")},[s("div",{staticClass:"van-sku__goods-name van-ellipsis"},[t._v(t._s(t.goods.title))]),t._t("default"),s("icon",{staticClass:"van-sku__close-icon",attrs:{name:"close"},on:{click:function(e){t.skuEventBus.$emit("sku:close")}}})],2)])},name:"sku-header",props:{sku:Object,goods:Object,skuEventBus:Object,selectedSku:Object},computed:{goodsImg:function(){var t=this.selectedSku.s1;return this.getSkuImg(t)||this.goods.picture}},methods:{getSkuImg:function(t){if(t){var e=this.sku.tree.filter(function(t){return"s1"===t.k_s})[0]||{};if(e.v){var s=e.v.filter(function(e){return e.id===t})[0];return s&&s.imgUrl?s.imgUrl:void 0}}}}}),_=Object(r.a)({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.b()},[e("div",{class:this.b("title")},[this._v(this._s(this.skuRow.k)+"：")]),this._t("default")],2)},name:"sku-row",props:{skuRow:Object}}),b=s(50),S=s.n(b),C={QUOTA_LIMIT:0,STOCK_LIMIT:1},y={LIMIT_TYPE:C,UNSELECTED_SKU_VALUE_ID:""},F=function(t){var e={};return t.forEach(function(t){e[t.k_s]=t.v}),e},x=function(t,e){var s=p()(e).filter(function(t){return""!==e[t]});return t.length===s.length},w=function(t,e){return t.filter(function(t){return p()(e).every(function(s){return String(t[s])===String(e[s])})})[0]},$=function(t,e){var s=F(t);return p()(e).reduce(function(t,i){var a=s[i],n=e[i];if(""!==n){var u=a.filter(function(t){return t.id===n})[0];u&&t.push(u)}return t},[])},I=function(t,e,s){var i,a=s.key,n=s.valueId,u=S()({},e,((i={})[a]=n,i)),o=p()(u).filter(function(t){return""!==u[t]});return t.filter(function(t){return o.every(function(e){return String(u[e])===String(t[e])})}).reduce(function(t,e){return t+e.stock_num},0)>0},B={normalizeSkuTree:F,getSkuComb:w,getSelectedSkuValues:$,isAllSelected:x,isSkuChoosable:I},E=Object(r.a)({render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"van-sku-row__item",class:{"van-sku-row__item--active":this.isChoosed,"van-sku-row__item--disabled":!this.isChoosable},on:{click:this.onSelect}},[this._v("\n  "+this._s(this.skuValue.name)+"\n")])},name:"sku-row-item",props:{skuEventBus:Object,skuValue:Object,skuList:Array,selectedSku:Object,skuKeyStr:String},computed:{isChoosed:function(){return this.skuValue.id===this.selectedSku[this.skuKeyStr]},isChoosable:function(){return I(this.skuList,this.selectedSku,{key:this.skuKeyStr,valueId:this.skuValue.id})}},methods:{onSelect:function(){this.isChoosable&&this.skuEventBus.$emit("sku:select",h()({},this.skuValue,{skuKeyStr:this.skuKeyStr}))}}}),O=C.QUOTA_LIMIT,N=C.STOCK_LIMIT,j=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"van-sku-stepper-stock"},[s("div",{staticClass:"van-sku-stepper-container"},[s("div",{staticClass:"van-sku__stepper-title"},[t._v(t._s(t.stepperTitle||t.$t("title"))+"：")]),s("stepper",{staticClass:"van-sku__stepper",attrs:{min:1,max:t.stepperLimit,"disable-input":t.disableStepperInput},on:{overlimit:t.onOverLimit,change:t.onChange},model:{value:t.currentNum,callback:function(e){t.currentNum=e},expression:"currentNum"}})],1),t.hideStock?t._e():s("div",{staticClass:"van-sku__stock"},[t._v(t._s(t.$t("remain",t.stock)))]),t.quotaText?s("div",{staticClass:"van-sku__quota"},[t._v(t._s(t.quotaText))]):t._e()])},name:"sku-stepper",components:{Stepper:c},props:{skuEventBus:Object,skuStockNum:Number,selectedSku:Object,selectedSkuComb:Object,selectedNum:Number,stepperTitle:String,quota:Number,quotaUsed:Number,hideStock:Boolean,disableStepperInput:Boolean,customStepperConfig:Object},data:function(){return{currentNum:this.selectedNum,limitType:N}},watch:{currentNum:function(t){this.skuEventBus.$emit("sku:numChange",t)},stepperLimit:function(t){t<this.currentNum&&(this.currentNum=t)}},computed:{stock:function(){return this.selectedSkuComb?this.selectedSkuComb.stock_num:this.skuStockNum},quotaText:function(){var t=this.customStepperConfig.quotaText,e="";return t?e=t:this.quota>0&&(e=this.$t("quota",this.quota)),e},stepperLimit:function(){var t=this.quota-this.quotaUsed,e=void 0;return this.quota>0&&t<=this.stock?(e=t<0?0:t,this.limitType=O):(e=this.stock,this.limitType=N),e}},methods:{setCurrentNum:function(t){this.currentNum=t},onOverLimit:function(t){this.skuEventBus.$emit("sku:overLimit",{action:t,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed})},onChange:function(t){var e=this.customStepperConfig.handleStepperChange;e&&e(t),this.$emit("change",t)}}}),T=s(14);function V(t){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)}function D(t){return/^\d+$/.test(t)}var M=s(67),q=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.b()},[s("van-uploader",{attrs:{disabled:!!t.paddingImg,"after-read":t.afterReadFile,"max-size":1024*t.maxSize*1024},on:{oversize:function(e){t.$toast(t.$t("maxSize",t.maxSize))}}},[s("div",{class:t.b("header")},[t.paddingImg?s("div",[t._v(t._s(t.$t("uploading")))]):[s("icon",{attrs:{name:"photograph"}}),s("span",{staticClass:"label"},[t._v(t._s(t.$t(t.value?"rephoto":"photo")))]),t._v(" "+t._s(t.$t("or"))+"\n        "),s("icon",{attrs:{name:"photo"}}),s("span",{staticClass:"label"},[t._v(t._s(t.$t(t.value?"reselect":"select")))])]],2)]),t.paddingImg||t.imgList.length>0?s("div",{staticClass:"van-clearfix"},[t._l(t.imgList,function(e){return s("div",{class:t.b("img")},[s("img",{attrs:{src:e}}),s("icon",{class:t.b("delete"),attrs:{name:"clear"},on:{click:function(e){t.$emit("input","")}}})],1)}),t.paddingImg?s("div",{class:t.b("img")},[s("img",{attrs:{src:t.paddingImg}}),s("loading",{class:t.b("uploading"),attrs:{type:"spinner",color:"black"}})],1):t._e()],2):t._e()],1)},name:"sku-img-uploader",components:{VanUploader:M.a},props:{value:String,uploadImg:{type:Function,required:!0},maxSize:{type:Number,default:6}},data:function(){return{paddingImg:""}},computed:{imgList:function(){return this.value&&!this.paddingImg?[this.value]:[]}},methods:{afterReadFile:function(t){var e=this;this.paddingImg=t.content,this.uploadImg(t.file,t.content).then(function(t){e.$emit("input",t),e.$nextTick(function(){e.paddingImg=""})}).catch(function(){e.paddingImg=""})}}}),L=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("cell-group",{class:t.b()},[t._l(t.messages,function(e,i){return["image"===e.type?s("cell",{key:t.goodsId+"-"+i,class:t.b("image-cell"),attrs:{label:t.$t("onePic"),required:"1"==e.required,title:e.name}},[s("sku-img-uploader",{attrs:{"upload-img":t.messageConfig.uploadImg,"max-size":t.messageConfig.uploadMaxSize},model:{value:t.messageValues[i].value,callback:function(e){t.$set(t.messageValues[i],"value",e)},expression:"messageValues[index].value"}})],1):s("field",{key:t.goodsId+"-"+i,attrs:{maxlength:"200",required:"1"==e.required,label:e.name,placeholder:t.getPlaceholder(e),type:t.getType(e)},model:{value:t.messageValues[i].value,callback:function(e){t.$set(t.messageValues[i],"value",e)},expression:"messageValues[index].value"}})]})],2)},name:"sku-messages",components:{SkuImgUploader:q,Field:T.a},props:{messages:Array,messageConfig:Object,goodsId:[Number,String]},data:function(){return{messageValues:this.resetMessageValues(this.messages)}},watch:{messages:function(t){this.messageValues=this.resetMessageValues(t)}},computed:{messagePlaceholderMap:function(){return this.messageConfig.placeholderMap||{}}},methods:{resetMessageValues:function(t){return(t||[]).map(function(){return{value:""}})},getType:function(t){return 1==+t.multiple?"textarea":"id_no"===t.type?"text":t.datetime>0?"datetime-local":t.type},getMessages:function(){var t=this,e={};return this.messageValues.forEach(function(s,i){var a=s.value;t.messages[i].datetime>0&&(a=a.replace(/T/g," ")),e["message_"+i]=a}),e},getCartMessages:function(){var t=this,e={};return this.messageValues.forEach(function(s,i){var a=s.value,n=t.messages[i];n.datetime>0&&(a=a.replace(/T/g," ")),e[n.name]=a}),e},getPlaceholder:function(t){var e=1==+t.multiple?"textarea":t.type;return this.messagePlaceholderMap[e]||this.$t("placeholder."+e)},validateMessages:function(){for(var t=this.messageValues,e=0;e<t.length;e++){var s=t[e].value,i=this.messages[e];if(""===s){if("1"==i.required){var a="image"===i.type?"upload":"fill";return this.$t(a)+i.name}}else{if("tel"===i.type&&!D(s))return this.$t("number");if("email"===i.type&&!V(s))return this.$t("email");if("id_no"===i.type&&(s.length<15||s.length>18))return this.$t("id_no")}}}}}),Q=s(7),A=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.b()},[t.showAddCartBtn?s("van-button",{attrs:{"bottom-action":"",text:t.$t("cart")},on:{click:function(e){t.skuEventBus.$emit("sku:addCart")}}}):t._e(),s("van-button",{attrs:{type:"primary","bottom-action":"",text:t.buyText||t.$t("buy")},on:{click:function(e){t.skuEventBus.$emit("sku:buy")}}})],1)},name:"sku-actions",components:{VanButton:Q.a},props:{buyText:String,skuEventBus:Object,showAddCartBtn:Boolean}}),P=C.QUOTA_LIMIT,Y=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isSkuEmpty?t._e():s("popup",{staticClass:"van-sku-container",attrs:{position:"bottom","close-on-click-overlay":t.closeOnClickOverlay,"get-container":t.getContainer},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._t("sku-header",[s("sku-header",{attrs:{"sku-event-bus":t.skuEventBus,"selected-sku":t.selectedSku,goods:t.goods,sku:t.sku}},[t._t("sku-header-price",[s("div",{staticClass:"van-sku__goods-price"},[s("span",{staticClass:"van-sku__price-symbol"},[t._v("￥")]),s("span",{staticClass:"van-sku__price-num"},[t._v(t._s(t.price))])])],{price:t.price,selectedSkuComb:t.selectedSkuComb})],2)],{skuEventBus:t.skuEventBus,selectedSku:t.selectedSku,selectedSkuComb:t.selectedSkuComb}),s("div",{staticClass:"van-sku-body",style:t.bodyStyle},[t._t("sku-body-top",null,{selectedSku:t.selectedSku,skuEventBus:t.skuEventBus}),t._t("sku-group",[t.hasSku?s("div",{staticClass:"van-sku-group-container van-hairline--bottom"},t._l(t.skuTree,function(e,i){return s("sku-row",{key:i,attrs:{"sku-row":e}},t._l(e.v,function(i,a){return s("sku-row-item",{key:a,attrs:{"sku-key-str":e.k_s,"sku-value":i,"sku-event-bus":t.skuEventBus,"selected-sku":t.selectedSku,"sku-list":t.sku.list}})}))})):t._e()],{selectedSku:t.selectedSku,skuEventBus:t.skuEventBus}),t._t("extra-sku-group",null,{skuEventBus:t.skuEventBus}),t._t("sku-stepper",[s("sku-stepper",{ref:"skuStepper",attrs:{"sku-event-bus":t.skuEventBus,"selected-sku":t.selectedSku,"selected-sku-comb":t.selectedSkuComb,"selected-num":t.selectedNum,"stepper-title":t.stepperTitle,"sku-stock-num":t.sku.stock_num,quota:t.quota,"quota-used":t.quotaUsed,"disable-stepper-input":t.disableStepperInput,"hide-stock":t.hideStock,"custom-stepper-config":t.customStepperConfig},on:{change:function(e){t.$emit("stepper-change",e)}}})],{skuEventBus:t.skuEventBus,selectedSku:t.selectedSku,selectedSkuComb:t.selectedSkuComb,selectedNum:t.selectedNum}),t._t("sku-messages",[s("sku-messages",{ref:"skuMessages",attrs:{"goods-id":t.goodsId,"message-config":t.messageConfig,messages:t.sku.messages}})])],2),t._t("sku-actions",[s("sku-actions",{attrs:{"sku-event-bus":t.skuEventBus,"buy-text":t.buyText,"show-add-cart-btn":t.showAddCartBtn}})],{skuEventBus:t.skuEventBus})],2)},name:"sku",components:{Popup:l.a,SkuHeader:f,SkuRow:_,SkuRowItem:E,SkuStepper:j,SkuMessages:L,SkuActions:A},props:{sku:Object,goods:Object,value:Boolean,buyText:String,goodsId:[Number,String],stepperTitle:String,hideStock:Boolean,getContainer:Function,resetStepperOnHide:Boolean,resetSelectedSkuOnHide:Boolean,disableStepperInput:Boolean,closeOnClickOverlay:Boolean,initialSku:{type:Object,default:function(){return{}}},quota:{type:Number,default:0},quotaUsed:{type:Number,default:0},showAddCartBtn:{type:Boolean,default:!0},bodyOffsetTop:{type:Number,default:200},messageConfig:{type:Object,default:function(){return{placeholderMap:{},uploadImg:function(){return g.a.resolve()},uploadMaxSize:5}}},customStepperConfig:{type:Object,default:function(){return{}}}},data:function(){return{selectedSku:{},selectedNum:1,show:this.value}},watch:{show:function(t){if(this.$emit("input",t),!t){var e=$(this.sku.tree,this.selectedSku);this.$emit("sku-close",{selectedSkuValues:e,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb}),this.resetStepperOnHide&&this.$refs.skuStepper&&this.$refs.skuStepper.setCurrentNum(1),this.resetSelectedSkuOnHide&&this.resetSelectedSku(this.skuTree)}},value:function(t){this.show=t},skuTree:function(t){this.resetSelectedSku(t)}},computed:{bodyStyle:function(){if(!this.$isServer)return{maxHeight:window.innerHeight-this.bodyOffsetTop+"px"}},isSkuCombSelected:function(){return x(this.sku.tree,this.selectedSku)},isSkuEmpty:function(){return 0===p()(this.sku).length},hasSku:function(){return!this.sku.none_sku},selectedSkuComb:function(){return this.hasSku?this.isSkuCombSelected?w(this.sku.list,this.selectedSku):null:{id:this.sku.collection_id,price:Math.round(100*this.sku.price),stock_num:this.sku.stock_num}},price:function(){return this.selectedSkuComb?(this.selectedSkuComb.price/100).toFixed(2):this.sku.price},skuTree:function(){return this.sku.tree||[]}},created:function(){var t=new i.default;this.skuEventBus=t,t.$on("sku:close",this.onClose),t.$on("sku:select",this.onSelect),t.$on("sku:numChange",this.onNumChange),t.$on("sku:overLimit",this.onOverLimit),t.$on("sku:addCart",this.onAddCart),t.$on("sku:buy",this.onBuy),this.resetSelectedSku(this.skuTree),this.$emit("after-sku-create",t)},methods:{resetSelectedSku:function(t){var e=this;this.selectedSku={},t.forEach(function(t){e.selectedSku[t.k_s]=e.initialSku[t.k_s]||""}),t.forEach(function(t){var s=t.k_s,i=t.v[0].id;1===t.v.length&&I(e.sku.list,e.selectedSku,{key:s,valueId:i})&&(e.selectedSku[s]=i)})},getSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getMessages():{}},getSkuCartMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getCartMessages():{}},validateSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.validateMessages():""},validateSku:function(){return 0===this.selectedNum?this.$t("unavailable"):this.isSkuCombSelected?this.validateSkuMessages():this.$t("spec")},onClose:function(){this.show=!1},onSelect:function(t){var e,s;this.selectedSku=this.selectedSku[t.skuKeyStr]===t.id?h()({},this.selectedSku,((e={})[t.skuKeyStr]="",e)):h()({},this.selectedSku,((s={})[t.skuKeyStr]=t.id,s)),this.$emit("sku-selected",{skuValue:t,selectedSku:this.selectedSku,selectedSkuComb:this.selectedSkuComb})},onNumChange:function(t){this.selectedNum=t},onOverLimit:function(t){var e=t.action,s=t.limitType,i=t.quota,a=t.quotaUsed,n=this.customStepperConfig.handleOverLimit;if(n)n(t);else if("minus"===e)Object(v.a)(this.$t("least"));else if("plus"===e)if(s===P){var u=this.$t("quota",i);a>0&&(u+="，"+this.$t("purchase",a)),Object(v.a)(u)}else Object(v.a)(this.$t("inventory"))},onAddCart:function(){this.onBuyOrAddCart("add-cart")},onBuy:function(){this.onBuyOrAddCart("buy-clicked")},onBuyOrAddCart:function(t){var e=this.validateSku();e?Object(v.a)(e):this.$emit(t,this.getSkuData())},getSkuData:function(){return{goodsId:this.goodsId,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb,messages:this.getSkuMessages(),cartMessages:this.getSkuCartMessages()}}}});Y.SkuActions=A,Y.SkuHeader=f,Y.SkuMessages=L,Y.SkuStepper=j,Y.SkuRow=_,Y.SkuRowItem=E,Y.skuHelper=B,Y.skuConstants=y;var z,U,K=Y,H=s(76),R=Object(r.a)({render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"van-hairline",class:t.b(),attrs:{href:t.url},on:{click:t.onClick}},[s("icon",{class:[t.b("icon"),t.iconClass],attrs:{info:t.info,name:t.icon}}),t._t("default",[t._v(t._s(t.text))])],2)},name:"goods-action-mini-btn",mixins:[H.a],props:{url:String,text:String,info:[String,Number],icon:String,iconClass:String},methods:{onClick:function(t){this.$emit("click",t),this.routerLink()}}}),W=Object(r.a)({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("van-button",{class:t.b(),attrs:{tag:"a",href:t.url,type:t.primary?"primary":"default","bottom-action":""},on:{click:t.onClick}},[t._t("default",[t._v(t._s(t.text))])],2)},name:"goods-action-big-btn",mixins:[H.a],components:{VanButton:Q.a},props:{url:String,text:String,primary:Boolean},methods:{onClick:function(t){this.$emit("click",t),this.routerLink()}}}),J=(s(311),Object(r.a)({render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.b()},[this._t("default")],2)},name:"goods-action"})),G=(s(57),s(58)),X=(s(59),s(60)),Z=(s(10),s(9)),tt=(s(11),s(8)),et=(s(27),s(28)),st=(s(39),s(32)),it=(s(51),s(52)),at=(s(53),s(54)),nt=(s(55),s(56)),ut=(s(1),s(2)),ot=s(3),rt=s(17),ct=(s(29),s(44)),lt=(z={Tabar:rt.a,Waiting:ct.a},o()(z,v.a.name,v.a),o()(z,nt.a.name,nt.a),o()(z,at.a.name,at.a),o()(z,it.a.name,it.a),o()(z,st.a.name,st.a),o()(z,et.a.name,et.a),o()(z,tt.a.name,tt.a),o()(z,Z.a.name,Z.a),o()(z,X.a.name,X.a),o()(z,G.a.name,G.a),o()(z,J.name,J),o()(z,W.name,W),o()(z,R.name,R),o()(z,K.name,K),o()(z,l.a.name,l.a),o()(z,c.name,c),{components:(U={Tabar:rt.a,Waiting:ct.a},o()(U,v.a.name,v.a),o()(U,nt.a.name,nt.a),o()(U,at.a.name,at.a),o()(U,it.a.name,it.a),o()(U,st.a.name,st.a),o()(U,et.a.name,et.a),o()(U,tt.a.name,tt.a),o()(U,Z.a.name,Z.a),o()(U,X.a.name,X.a),o()(U,G.a.name,G.a),o()(U,J.name,J),o()(U,W.name,W),o()(U,R.name,R),o()(U,K.name,K),o()(U,l.a.name,l.a),o()(U,c.name,c),U),data:function(){return{QYC:null,tabbarActive:0,waiting:!1,collect:0,jwt:null,active:0,cartCount:0,goods_id:0,detail:!0,pingjiaNum:"",borderShow:!1,shopImg:[],shopTile:"",truePrice:"",falPrice:"",pinpai:"",shopDetail:[],shopPingjia:[],showBase:!1,inputNum:1,activeIndex:5,styleList:[],goodsPrice:[],goods:[],shopName:"",goodsItem:[],shopPrice:null,addIndex:null,shopSpec:null,money:0}},beforeCreate:function(){ut.a.init(750)},created:function(){this.QYC=new ot.a(this),this.QYC.created()},mounted:function(){this.QYC.mounted()},methods:{on_vue_created:function(){this.jwt=this.QYC.getItem("jwt")},on_vue_mounted:function(){this.plusReady()},plusReady:function(){if(window.plus){var t=plus.webview.currentWebview();this.goods_id=t.goods_id}else{var e=this.QYC.getQueryString("goods_id");this.goods_id=e,console.log("goods_id==="+this.QYC.getQueryString("goods_id"))}this.queryList()},on_click_toService:function(){this.QYC.openWebview({url:"./king.mine.service.html",id:"king.mine.service"},{titleNView:null})},queryList:function(){this.waiting=!0,this.QYC.get({name:"queryList",url:"goods_detail",params:{goods_id:this.goods_id}})},on_http_queryList:function(t){this.waiting=!1,console.log(n()(t.data.data)),1==t.data.code?(this.collect=t.data.data.shouchang,this.shopImg=t.data.data.imgsarr,this.shopTile=t.data.data.detail.title,this.truePrice=t.data.data.detail.price,this.falPrice=t.data.data.detail.old_price,this.pinpai=t.data.data.detail.brand,this.shopDetail=t.data.data.detail.detail,this.pingjiaNum=t.data.data.comment_count,this.shopPingjia=t.data.data.comment,this.styleList=t.data.data.filter_spec,this.goodsPrice=t.data.data.spec_goods_price,this.cartCount=t.data.data.cart_count,this.money=t.data.data.detail.money):Object(v.a)("网络错误，请稍后重试")},on_click_selectClick:function(){this.addIndex=1,this.showBase=!0,this.getShopId()},switchSpec:function(t,e){for(var s=0;s<e.length;s++)e[s].status=s==t;this.getShopId()},getShopId:function(){var t=this,e=document.getElementsByClassName("radio");t.goods=[],t.goodsItem=[],setTimeout(function(){for(var s=0;s<e.length;s++)1==e[s].checked&&(t.goods.push(e[s].value),t.goodsItem.push(e[s].getAttribute("acc")));var i=t.goods.join("_"),a=t.goodsItem.join("、");for(var s in t.shopName=a,t.shopSpec=i,t.goodsPrice)i==s&&(t.shopPrice=t.goodsPrice[s].price)},100)},on_click_close:function(){this.showBase=!1,this.getShopId()},on_click_config:function(){1==this.addIndex?(this.showBase=!1,this.getShopId()):2==this.addIndex?this.addCarQuery():this.submitFun()},on_click_addCar:function(){null==this.shopPrice?(this.showBase=!0,this.getShopId(),this.addIndex=2):this.addCarQuery()},addCarQuery:function(){console.log(this.shopPrice),this.QYC.get({name:"addCar",url:"addCart",params:{jwt:this.jwt,goods_id:this.goods_id,goods_spec:this.shopSpec,goods_num:this.inputNum}})},on_http_addCar:function(t){return 1!=t.data.code?(Object(v.a)(t.data.message),!1):3==t.data.code?(Object(v.a)(t.data.message),this.QYC.clear(),void this.QYC.openWebview({url:"./king.login.html",id:"king.login"},{titleNView:null})):(Object(v.a)("成功加入购物车"),this.showBase=!1,void this.queryList())},on_click_submit:function(){null==this.shopPrice?(this.showBase=!0,this.getShopId(),this.addIndex=3):this.submitFun()},submitFun:function(){this.QYC.get({name:"submit",url:"go_buy",params:{jwt:this.jwt,goods_id:this.goods_id,goods_spec:this.shopSpec,goods_num:this.inputNum}})},on_http_submit:function(t){1==t.data.code?this.QYC.openWebview({url:"./king.shop.shoppingCartijiao.html",id:"king.shop.shoppingCartijiao"},{titleNView:null},{oid:t.data.data.oid}):3==t.data.code?(Object(v.a)(t.data.message),this.QYC.clear(),this.QYC.openWebview({url:"./king.login.html",id:"king.login"},{titleNView:null})):Object(v.a)(t.data.message)},on_click_toHome:function(){this.QYC.openWebview({url:"./king.home.home.html",id:"king.home.home"},{titleNView:null})}}}),dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticStyle:{width:"100%",height:"0.88rem",clear:"both"}}),t._v(" "),s("van-swipe",{staticClass:"homeMySwipe",attrs:{autoplay:3e3}},t._l(t.shopImg,function(t,e){return s("van-swipe-item",{key:e},[s("img",{attrs:{src:t[e],alt:""}})])})),t._v(" "),s("div",{staticClass:"titleBox"},[s("p",{staticClass:"shopTitle"},[t._v(t._s(t.shopTile))]),t._v(" "),s("p",{staticClass:"price"},[s("span",{staticClass:"truePrice"},[t._v("积分："+t._s(t.truePrice)+"      现金："+t._s(t.money))])])]),t._v(" "),s("van-cell-group",[null==t.shopPrice?s("van-cell",{staticClass:"guige",attrs:{"is-link":"",border:t.borderShow},on:{click:function(e){t.QYC.click("selectClick")}}},[s("span",[t._v("规格")]),s("em",[t._v("请选择规格")])]):s("van-cell",{staticClass:"guige",attrs:{"is-link":"",border:t.borderShow},on:{click:function(e){t.QYC.click("selectClick")}}},[s("span",[t._v("规格")]),s("em",[t._v("已选择："+t._s(t.shopName)+",数量："+t._s(t.inputNum))])]),t._v(" "),s("van-cell",{staticClass:"guige pinpai"},[s("span",[t._v("品牌")]),s("em",[t._v(t._s(t.pinpai))])])],1),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"kong",staticStyle:{height:"1rem",width:"100%"}}),t._v(" "),s("van-goods-action",{staticClass:"bottom"},[s("van-goods-action-mini-btn",{staticStyle:{height:"1rem"},attrs:{icon:"wap-home",text:"首页"},on:{click:function(e){t.QYC.click("toHome")}}}),t._v(" "),s("van-goods-action-mini-btn",{staticStyle:{height:"1rem"},attrs:{icon:"contact",text:"客服"},on:{click:function(e){t.QYC.click("toService")}}}),t._v(" "),s("van-goods-action-big-btn",{staticStyle:{height:"1rem"},attrs:{icon:"cart",text:"加入购物车",info:t.cartCount},on:{click:function(e){t.QYC.click("addCar")}}}),t._v(" "),s("van-goods-action-big-btn",{attrs:{text:"立即购买",primary:""},on:{click:function(e){t.QYC.click("submit")}}})],1),t._v(" "),s("van-popup",{attrs:{position:"bottom"},model:{value:t.showBase,callback:function(e){t.showBase=e},expression:"showBase"}},[s("div",{staticClass:"popBox"},[s("div",{staticClass:"shopIm"},[s("div",[s("p",{staticClass:"price"},[s("span",{staticClass:"truePrice"},[t._v("￥"+t._s(t.shopPrice))])])]),t._v(" "),s("van-icon",{attrs:{name:"close"},on:{click:function(e){t.QYC.click("close")}}})],1),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),t._l(t.styleList,function(e,i,a){return s("div",{key:a},[s("p",{staticClass:"style"},[t._v(t._s(i))]),t._v(" "),s("div",{staticClass:"styleListUl"},t._l(e,function(i,a){return s("a",{key:a,staticClass:"styleList",class:i.status?"active":"",attrs:{href:"javascript:void(0);"},on:{click:function(s){t.switchSpec(a,e)}}},[i.status?s("input",{staticClass:"radio",staticStyle:{display:"none"},attrs:{type:"radio",acc:i.item,checked:"checked"},domProps:{value:i.item_id}}):s("input",{staticClass:"radio",staticStyle:{display:"none"},attrs:{type:"radio"},domProps:{value:i.item_id}}),t._v(" "+t._s(i.item)+"\n\t\t\t\t\t")])}))])}),t._v(" "),s("div",{staticClass:"shopNum"},[s("span",[t._v("数量")]),t._v(" "),s("van-stepper",{model:{value:t.inputNum,callback:function(e){t.inputNum=e},expression:"inputNum"}})],1),t._v(" "),s("div",{staticClass:"btn",on:{click:function(e){t.QYC.click("config")}}},[t._v("确定")])],2)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mui-bar mui-bar-nav"},[e("a",{staticClass:"mui-action-back mui-icon mui-icon-left-nav mui-pull-left"}),this._v(" "),e("h1",{staticClass:"mui-title",staticStyle:{color:"#000","font-size":"0.3rem"}},[this._v("商品详情")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"babyintro"},[e("span",[this._v("宝贝详情")])])}]};var ht=s(16)(lt,dt,!1,function(t){s(309)},null,null).exports;new i.default({el:"#app",render:function(t){return t(ht)}})},309:function(t,e){},310:function(t,e){},311:function(t,e){}},[308]);